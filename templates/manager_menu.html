<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manage Menu | Manager Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary: #ff7b00;
      --secondary: #d86f00;
      --bg-light: #fffaf5;
      --text-dark: #333;
      --card-bg: #ffffff;
    }

    [data-theme="dark"] {
      --bg-light: #1e1e1e;
      --text-dark: #ffffff;
      --card-bg: #2a2a2a;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; transition: background 0.3s, color 0.3s; }

    body {
      font-family: "Poppins", sans-serif;
      background-color: var(--bg-light);
      color: var(--text-dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Navbar */
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(90deg, #ff7b00, #ffae42);
      padding: 15px 40px;
      color: white;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .logo { font-weight: 700; font-size: 24px; letter-spacing: 1px; }
    .logo span { color: #fff2e6; }

    /* Nav Links */
    .nav-links {
      display: flex;
      align-items: center;
      gap: 30px;
      position: relative;
    }

    .nav-item {
      position: relative;
      cursor: pointer;
    }

    .nav-links a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      position: relative;
    }

    .nav-links a::after {
      content: "";
      position: absolute;
      width: 0%;
      height: 2px;
      background-color: white;
      left: 0;
      bottom: -4px;
      transition: 0.3s;
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    /* Dropdown menu */
    .dropdown-content {
      display: none;
      position: absolute;
      top: 40px;
      left: 0;
      background-color: var(--card-bg);
      min-width: 180px;
      box-shadow: 0 5px 10px rgba(0,0,0,0.1);
      border-radius: 8px;
      overflow: hidden;
      z-index: 999;
    }

    .dropdown-content a {
      color: var(--text-dark);
      padding: 10px 15px;
      display: block;
      text-decoration: none;
      font-weight: 500;
    }

    .dropdown-content a:hover {
      background-color: rgba(255, 123, 0, 0.1);
    }

    .nav-item.open .dropdown-content {
      display: block;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }

    .icon-btn {
      background: white;
      color: var(--secondary);
      border: none;
      padding: 6px 10px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      transition: 0.3s;
    }

    .icon-btn:hover {
      background: #fff2e6;
    }

    /* ‚úÖ Profile Image */
    .profile img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid white;
      transition: transform 0.2s ease;
    }

    .profile img:hover {
      transform: scale(1.05);
    }

    /* Profile Modal */
    .profile-modal {
      display: none;
      position: absolute;
      top: 60px;
      right: 0;
      background: var(--card-bg);
      color: var(--text-dark);
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      padding: 20px;
      width: 200px;
      z-index: 2000;
    }

    .profile-modal.active {
      display: block;
    }

    .profile-modal h3 {
      margin-bottom: 10px;
      color: var(--primary);
      font-size: 16px;
    }

    .profile-modal p {
      margin: 4px 0;
      font-size: 14px;
    }

    .profile-modal button {
      background: var(--primary);
      border: none;
      color: white;
      padding: 8px 10px;
      border-radius: 6px;
      width: 100%;
      margin-top: 10px;
      cursor: pointer;
      font-weight: 600;
    }

    .profile-modal button:hover {
      background: var(--secondary);
    }

    main { flex: 1; padding: 40px 60px; }

    header h1 { color: var(--secondary); font-size: 30px; }
    header p { color: #555; margin-top: 5px; }

    /* Menu Form */
    form {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
      margin-top: 30px;
      margin-bottom: 30px;
    }

    input, select, button {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-family: "Poppins";
    }

    button {
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }

    button:hover { background: var(--secondary); }

    /* Category Sections */
    .category-section {
      margin-bottom: 40px;
    }

    .category-header {
      background: var(--primary);
      color: white;
      padding: 15px 20px;
      border-radius: 10px 10px 0 0;
      margin-bottom: 0;
      font-size: 20px;
      font-weight: 600;
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--card-bg);
      border-radius: 0 0 10px 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    th, td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }

    th {
      background: var(--primary);
      color: white;
      text-transform: uppercase;
    }

    .delete-btn {
      background: crimson;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      margin-right: 5px;
    }

    .delete-btn:hover { background: darkred; }

    .edit-btn {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      margin-right: 5px;
    }

    .edit-btn:hover { background: #45a049; }

    .update-btn {
      background: #2196F3;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      margin-right: 5px;
    }

    .update-btn:hover { background: #0b7dda; }

    .cancel-btn {
      background: #ff9800;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      margin-right: 5px;
    }

    .cancel-btn:hover { background: #e68a00; }

    .edit-input {
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 100%;
      font-family: "Poppins";
    }

    .search-box {
      margin-bottom: 20px;
    }

    .search-box input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-family: "Poppins";
    }

    footer {
      text-align: center;
      padding: 15px;
      background: var(--secondary);
      color: white;
      margin-top: auto;
    }

    .action-buttons {
      display: flex;
      gap: 5px;
    }
    
    .action-buttons button {
      font-size: 12px;
      padding: 6px 10px;
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      background: #4CAF50;
      color: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1001;
      display: none;
    }
  </style>
</head>

<body>
  <!-- Notification -->
  <div class="notification" id="notification"></div>

  <!-- Navbar - Updated with Dashboard Style -->
  <nav>
    <div class="logo">MANAGER <span>DASHBOARD</span></div>

    <div class="nav-links">
      <a href="#">Home</a>
      <a href="{{ url_for('manager_menu') }}">Menu</a>
      <a href="{{ url_for('manager_employees') }}">Employee</a>
      <div class="nav-item">
        <a href="#">Inventory</a>
        <div class="dropdown-content">
          <a href="{{ url_for('ingredient_stock') }}">Ingredient Stock</a>
          <a href="{{ url_for('low_stock') }}">Low Stock</a>
        </div>
      </div>

      <div class="nav-item">
        <a href="#">Purchase Orders</a>
        <div class="dropdown-content">
          <a href="{{ url_for('generate_po') }}">Generate PO</a>
          <a href="{{ url_for('purchase_order') }}">Enter PO Details</a>
        </div>
      </div>

      <div class="nav-item">
        <a href="#">Reports</a>
        <div class="dropdown-content">
          <a href="{{ url_for('daily_sales') }}">Daily Sales</a>
          <a href="{{ url_for('monthly_sales') }}">Monthly Sales</a>
          <a href="{{ url_for('expense_report') }}">Expense Report</a>
        </div>
      </div>

      <a href="{{ url_for('analytics') }}">Analytics</a>
    </div>

    <div class="nav-actions">
      <button class="icon-btn" id="refreshBtn" title="Refresh">üîÑ</button>
      <button class="icon-btn" id="themeToggle" title="Toggle Theme">üåô</button>
      <div class="profile" id="profileBtn">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile" />
      </div>

      <!-- Profile Modal -->
      <div class="profile-modal" id="profileModal">
        <h3>Profile</h3>
        <p><strong>Name:</strong> Manager</p>
        <p><strong>Role:</strong> Restaurant Manager</p>
        <button onclick="window.location.href='/logout'">Logout</button>
      </div>
    </div>
  </nav>

  <!-- Menu Management -->
  <main>
    <header>
      <h1>üçΩ Manage Menu</h1>
      <p>Add, edit, or remove menu items below. Changes will reflect in customer menu immediately.</p>
    </header>

    <form id="menuForm">
      <input type="text" id="itemName" placeholder="Item Name" required />
      <input type="number" id="itemPrice" placeholder="Price (‚Çπ)" required />
      <select id="itemCategory">
        <option value="Tiffins">Tiffins</option>
        <option value="Starters">Starters</option>
        <option value="Main Course">Main Course</option>
        <option value="Desserts">Desserts</option>
        <option value="Beverages">Beverages</option>
      </select>
      <input type="text" id="itemDescription" placeholder="Description" />
      <input type="text" id="itemImage" placeholder="Image URL" />
      <button type="submit">Add Item</button>
    </form>

    <div class="search-box">
      <input type="text" id="searchInput" placeholder="üîç Search items..." />
    </div>

    <div id="menuSections"></div>
  </main>

  <footer>
    <p>¬© 2025 Manager Dashboard | Restaurant Automation System</p>
  </footer>

  <script>
    // Theme Toggle
    const themeToggle = document.getElementById("themeToggle");
    themeToggle.addEventListener("click", () => {
      const isDark = document.body.getAttribute("data-theme") === "dark";
      if (isDark) {
        document.body.removeAttribute("data-theme");
        themeToggle.textContent = "üåô";
      } else {
        document.body.setAttribute("data-theme", "dark");
        themeToggle.textContent = "‚òÄÔ∏è";
      }
    });

    // Dropdown logic
    const navItems = document.querySelectorAll(".nav-item");
    navItems.forEach(item => {
      item.addEventListener("click", e => {
        e.stopPropagation();
        item.classList.toggle("open");
        navItems.forEach(other => {
          if (other !== item) other.classList.remove("open");
        });
      });
    });
    document.addEventListener("click", () => {
      navItems.forEach(item => item.classList.remove("open"));
    });

    // Profile modal toggle
    const profileBtn = document.getElementById("profileBtn");
    const profileModal = document.getElementById("profileModal");
    profileBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      profileModal.classList.toggle("active");
    });
    document.addEventListener("click", (e) => {
      if (!profileModal.contains(e.target) && !profileBtn.contains(e.target)) {
        profileModal.classList.remove("active");
      }
    });

    // Menu Management Logic
    const form = document.getElementById("menuForm");
    const menuSections = document.getElementById("menuSections");
    const searchInput = document.getElementById("searchInput");
    const notification = document.getElementById("notification");
    
    // Show notification
    function showNotification(message, isSuccess = true) {
      notification.textContent = message;
      notification.style.background = isSuccess ? '#4CAF50' : '#f44336';
      notification.style.display = 'block';
      
      setTimeout(() => {
        notification.style.display = 'none';
      }, 3000);
    }
    
    // Complete menu data - ALL YOUR ITEMS ARE HERE
    const completeMenu = [
      // Tiffins
      { name: "Idli Sambar", price: 60, category: "Tiffins", description: "Soft idlis served with hot sambar and chutney.", image: "../static/images/idlisambar.jpeg" },
      { name: "Masala Dosa", price: 90, category: "Tiffins", description: "Crispy dosa stuffed with spiced potato masala.", image: "../static/images/masaladosa.jpeg" },
      { name: "Uggani Bajji", price: 80, category: "Tiffins", description: "Fluffy puris served with delicious aloo curry.", image: "../static/images/ugganibajji.jpeg" },
      { name: "Vada Sambar", price: 70, category: "Tiffins", description: "Crispy medu vada dipped in flavorful sambar.", image: "../static/images/vadasambar.jpeg" },
      { name: "Upma", price: 55, category: "Tiffins", description: "Soft roasted semolina cooked with veggies.", image: "../static/images/upma.jpeg" },
      { name: "Pongal", price: 70, category: "Tiffins", description: "Traditional South Indian rice-lentil dish.", image: "../static/images/pongal.jpeg" },
      { name: "Onion Uttapam", price: 85, category: "Tiffins", description: "Thick uttapam topped with onions & spices.", image: "../static/images/onionuttapam.jpeg" },
      { name: "Ghee Dosa", price: 110, category: "Tiffins", description: "Crispy dosa fried with aromatic ghee.", image: "../static/images/gheedosa.jpeg" },
      { name: "Rava Dosa", price: 100, category: "Tiffins", description: "Thin and crispy semolina dosa.", image: "../static/images/ravadosa.jpeg" },
      { name: "Poori Chole", price: 90, category: "Tiffins", description: "Deep fried pooris with spicy chole.", image: "../static/images/pootichole.jpeg" },

      // Starters - Veg
      { name: "Paneer Tikka", price: 220, category: "Starters", description: "Soft cottage cheese cubes marinated in spices and grilled.", image: "../static/images/paneertikka.jpeg" },
      { name: "Veg Manchurian", price: 200, category: "Starters", description: "Crispy veggie balls tossed in spicy Indo-Chinese sauce.", image: "../static/images/vegmanchurian.jpeg" },
      { name: "Spring Rolls", price: 180, category: "Starters", description: "Crispy rolls filled with veggies and noodles.", image: "../static/images/springrolls.jpeg" },
      { name: "Hara Bhara Kabab", price: 190, category: "Starters", description: "Nutritious patties made with spinach and peas.", image: "../static/images/harabarakabab.jpeg" },
      { name: "Veg Crispy", price: 210, category: "Starters", description: "Crispy fried vegetables tossed in tangy sauce.", image: "../static/images/vegcrispy.jpeg" },
      { name: "Corn Cheese Balls", price: 170, category: "Starters", description: "Crunchy balls stuffed with sweet corn and cheese.", image: "../static/images/cheeseballs.jpeg" },
      { name: "Paneer 65", price: 200, category: "Starters", description: "South-Indian style spicy paneer starter.", image: "../static/images/paneer65.jpeg" },
      { name: "Chilli Mushroom", price: 190, category: "Starters", description: "Stir-fried mushrooms tossed in chilli sauce.", image: "../static/images/chillimushroom.jpeg" },
      { name: "Stuffed Aloo Tikki", price: 160, category: "Starters", description: "Potato patties stuffed with spicy filling.", image: "../static/images/stuffedalootikki.jpeg" },

      // Starters - Non-Veg
      { name: "Chicken Lollipop", price: 250, category: "Starters", description: "Crispy chicken wings coated in tangy sauce.", image: "../static/images/chickenlollypop.jfif" },
      { name: "Chicken 65", price: 260, category: "Starters", description: "Spicy deep-fried chicken bites.", image: "../static/images/chicken65.jpeg" },
      { name: "Fish Fingers", price: 240, category: "Starters", description: "Golden fried fish strips.", image: "../static/images/fishfingers.jpeg" },
      { name: "Chilli Chicken", price: 260, category: "Starters", description: "Chinese style spicy chicken starter.", image: "../static/images/chillichicken.jpeg" },
      { name: "Prawn Fry", price: 320, category: "Starters", description: "Fried prawns marinated in coastal spices.", image: "../static/images/prawnfry.jpeg" },
      { name: "Chicken Tikka", price: 280, category: "Starters", description: "Chicken cubes grilled in tandoori spices.", image: "../static/images/chickentikka.jpeg" },
      { name: "Mutton Seekh Kabab", price: 350, category: "Starters", description: "Minced mutton kebabs grilled on skewers.", image: "../static/images/muttonseekhkabab.jpeg" },
      { name: "Chicken Crispy", price: 250, category: "Starters", description: "Crisp chicken tossed in spicy sauce.", image: "../static/images/chickencrispy.jpeg" },
      { name: "Fish Tikka", price: 300, category: "Starters", description: "Fish cubes grilled in tandoor.", image: "../static/images/fishtikka.jpeg" },
      { name: "Chicken Popcorn", price: 220, category: "Starters", description: "Crispy bite-sized chicken chunks.", image: "../static/images/chickenpopcorn.jpeg" },
      { name: "Chicken Pakora", price: 230, category: "Starters", description: "Crispy deep-fried chicken fritters.", image: "../static/images/chickenpakora.jpeg" },
      { name: "Egg Pakora", price: 150, category: "Starters", description: "Boiled eggs fried in chickpea batter.", image: "../static/images/eggpakora.jpeg" },

      // Main Course - Veg
      { name: "Paneer Butter Masala", price: 300, category: "Main Course", description: "Creamy rich paneer curry.", image: "../static/images/paneerbuttermasala.jpeg" },
      { name: "Veg Biryani", price: 280, category: "Main Course", description: "Fragrant rice slow cooked with veggies.", image: "../static/images/vegbiryani.jpeg" },
      { name: "Dal Tadka", price: 200, category: "Main Course", description: "Yellow dal tempered with garlic.", image: "../static/images/daltadka.jpeg" },
      { name: "Palak Paneer", price: 280, category: "Main Course", description: "Spinach gravy with paneer cubes.", image: "../static/images/palakpaneer.jpeg" },
      { name: "Veg Fried Rice", price: 230, category: "Main Course", description: "Chinese style rice loaded with veggies.", image: "../static/images/vegfriedrice.jpeg" },
      { name: "Veg Pulao", price: 240, category: "Main Course", description: "Light, fragrant rice with veggies.", image: "../static/images/vegpulao.jpeg" },
      { name: "Mix Veg Curry", price: 260, category: "Main Course", description: "Mixed seasonal vegetables cooked in gravy.", image: "../static/images/mixvegcurry.jpeg" },
      { name: "Kaju Curry", price: 340, category: "Main Course", description: "Rich curry made with cashews.", image: "../static/images/kajucurry.jpeg" },
      { name: "Matar Paneer", price: 280, category: "Main Course", description: "Peas and paneer cooked in tomato gravy.", image: "../static/images/matarpaneer.jpeg" },
      { name: "Aloo Gobi", price: 220, category: "Main Course", description: "Cauliflower and potato curry.", image: "../static/images/aloogobi.jpeg" },
      { name: "Mushroom Masala", price: 270, category: "Main Course", description: "Rich curry with mushrooms.", image: "../static/images/mushroommasala.jpeg" },

      // Main Course - Non-Veg
      { name: "Butter Chicken", price: 320, category: "Main Course", description: "Creamy tomato gravy with tender chicken.", image: "../static/images/butterchicken.jpeg" },
      { name: "Chicken Fried Rice", price: 270, category: "Main Course", description: "Chinese style chicken rice.", image: "../static/images/chickenfriedrice.jpeg" },
      { name: "Mutton Rogan Josh", price: 400, category: "Main Course", description: "Authentic Kashmiri lamb curry.", image: "../static/images/muttonroaganjosh.jpeg" },
      { name: "Egg Curry", price: 220, category: "Main Course", description: "Boiled eggs simmered in onion-tomato gravy.", image: "../static/images/eggcurry.jpeg" },
      { name: "Chicken Biryani", price: 320, category: "Main Course", description: "Slow cooked layered biryani.", image: "../static/images/chickenbiryani.jpeg" },
      { name: "Fish Curry", price: 350, category: "Main Course", description: "Traditional fish curry with spices.", image: "../static/images/fishcurry.jpeg" },
      { name: "Chicken Curry", price: 300, category: "Main Course", description: "Classic Indian style chicken gravy.", image: "../static/images/chickencurry.jpeg" },
      { name: "Mutton Biryani", price: 420, category: "Main Course", description: "Rich aromatic biryani with mutton.", image: "../static/images/muttonbiryani.jpeg" },
      { name: "Egg Biryani", price: 120, category: "Main Course", description: "Slow cooked layered egg biryani.", image: "../static/images/eggbiryani.jpeg" },
      { name: "Butter naan", price: 25, category: "Main Course", description: "A soft Indian flatbread that is generously brushed with melted butter or ghee after cooking", image: "../static/images/butternaan.jpeg" },
      { name: "Aloo Paratha", price: 30, category: "Main Course", description: "A popular Indian flatbread stuffed with a spiced mashed potato filling.", image: "../static/images/alooparatha.jpeg" },
      { name: "Prawn Curry", price: 360, category: "Main Course", description: "Prawns cooked in coastal masala.", image: "../static/images/prawncurry.jpeg" },
      { name: "Chicken Keema Fry", price: 350, category: "Main Course", description: "Minced chicken cooked with spices.", image: "../static/images/chickenkeemafry.jpeg" },
      { name: "Mutton Keema Fry", price: 360, category: "Main Course", description: "Dry minced mutton fry.", image: "../static/images/muttonkeemacurry.jpeg" },

      // Desserts
      { name: "Gulab Jamun", price: 120, category: "Desserts", description: "Soft dumplings soaked in sugar syrup.", image: "../static/images/gulabjamun.jpeg" },
      { name: "Rasmalai", price: 160, category: "Desserts", description: "Chenna patties in sweetened milk.", image: "../static/images/rasmalai.jpeg" },
      { name: "Fruit Salad", price: 130, category: "Desserts", description: "Fresh mixed fruits.", image: "../static/images/fruitsalad.jpeg" },
      { name: "Falooda", price: 160, category: "Desserts", description: "Layered dessert with ice cream.", image: "../static/images/falooda.jpeg" },
      { name: "Mango Pudding", price: 130, category: "Desserts", description: "Soft pudding made with mango.", image: "../static/images/mangopudding.jpeg" },
      { name: "Kaju Katli", price: 180, category: "Desserts", description: "Cashew based sweet.", image: "../static/images/kajukatli.jpeg" },
      { name: "Jalebi", price: 120, category: "Desserts", description: "Crispy syrup coated jalebi.", image: "../static/images/jalebi.jpeg" },
      { name: "Basundi", price: 150, category: "Desserts", description: "Sweet thickened milk.", image: "../static/images/basundi.jpeg" },
      { name: "Shrikhand", price: 140, category: "Desserts", description: "Sweet hung curd dessert.", image: "../static/images/shrikhand.jpeg" },
      { name: "Custard", price: 110, category: "Desserts", description: "Classic vanilla custard with fruits.", image: "../static/images/custard.jpeg" },

      // Beverages
      { name: "Lassi", price: 90, category: "Beverages", description: "Refreshing yogurt drink.", image: "../static/images/lassi.jpeg" },
      { name: "Cold Coffee", price: 130, category: "Beverages", description: "Chilled coffee blended with milk.", image: "../static/images/coldcoffee.jpeg" },
      { name: "Mango Shake", price: 140, category: "Beverages", description: "Fresh mango milkshake.", image: "../static/images/mangoshake.jpeg" },
      { name: "Hot Chocolate", price: 150, category: "Beverages", description: "Creamy hot chocolate.", image: "../static/images/hotchocolate.jpeg" },
      { name: "Masala Chai", price: 60, category: "Beverages", description: "Spiced Indian tea.", image: "../static/images/masalachai.jpeg" },
      { name: "Fresh Lime Soda", price: 100, category: "Beverages", description: "Sweet & salty lime soda.", image: "../static/images/freshlimesoda.jpeg" },
      { name: "Badam Milk", price: 130, category: "Beverages", description: "Almond flavoured milk.", image: "../static/images/badammilk.jpeg" },
      { name: "Strawberry Shake", price: 140, category: "Beverages", description: "Creamy strawberry shake.", image: "../static/images/strawberryshake.jpeg" },
      { name: "Orange Juice", price: 110, category: "Beverages", description: "Fresh orange juice.", image: "../static/images/orangejuice.jpeg" },
      { name: "Watermelon Juice", price: 100, category: "Beverages", description: "Freshly crushed watermelon.", image: "../static/images/watermelonjuice.jpeg" },
      { name: "Cappuccino", price: 150, category: "Beverages", description: "Frothy Italian coffee.", image: "../static/images/cappuccino.jpeg" }
    ];

    // Load menu from localStorage or initialize with complete menu
    let menu = JSON.parse(localStorage.getItem("restaurantMenu")) || completeMenu;

    let editingIndex = -1;

    // SYNC FUNCTION: Updates customer menu when manager makes changes
    function syncMenuToCustomerView() {
        const customerMenuData = {
            "Tiffins": menu.filter(item => item.category === "Tiffins").map(item => ({
                name: item.name,
                price: item.price,
                img: item.image,
                desc: item.description
            })),
            "Starters": menu.filter(item => item.category === "Starters").map(item => ({
                name: item.name,
                price: item.price,
                img: item.image,
                desc: item.description
            })),
            "Main Course": menu.filter(item => item.category === "Main Course").map(item => ({
                name: item.name,
                price: item.price,
                img: item.image,
                desc: item.description
            })),
            "Desserts": menu.filter(item => item.category === "Desserts").map(item => ({
                name: item.name,
                price: item.price,
                img: item.image,
                desc: item.description
            })),
            "Beverages": menu.filter(item => item.category === "Beverages").map(item => ({
                name: item.name,
                price: item.price,
                img: item.image,
                desc: item.description
            }))
        };
        
        localStorage.setItem("customerMenuData", JSON.stringify(customerMenuData));
    }

    function renderMenu() {
      menuSections.innerHTML = "";
      const searchTerm = searchInput.value.toLowerCase();
      
      // Group items by category
      const categories = {
        "Tiffins": menu.filter(item => item.category === "Tiffins"),
        "Starters": menu.filter(item => item.category === "Starters"),
        "Main Course": menu.filter(item => item.category === "Main Course"),
        "Desserts": menu.filter(item => item.category === "Desserts"),
        "Beverages": menu.filter(item => item.category === "Beverages")
      };

      // Render each category section
      Object.entries(categories).forEach(([categoryName, categoryItems]) => {
        // Filter items based on search
        const filteredItems = categoryItems.filter(item => 
          item.name.toLowerCase().includes(searchTerm) ||
          (item.description && item.description.toLowerCase().includes(searchTerm))
        );

        // Don't skip empty categories - show them even if empty
        const section = document.createElement("div");
        section.className = "category-section";
        
        section.innerHTML = `
          <h2 class="category-header">${categoryName} (${filteredItems.length} items)</h2>
          <table>
            <thead>
              <tr>
                <th>Item Name</th>
                <th>Price (‚Çπ)</th>
                <th>Description</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="${categoryName.toLowerCase().replace(' ', '-')}-tbody"></tbody>
          </table>
        `;

        menuSections.appendChild(section);

        const tbody = document.getElementById(`${categoryName.toLowerCase().replace(' ', '-')}-tbody`);
        
        filteredItems.forEach((item, index) => {
          const globalIndex = menu.findIndex(m => m.name === item.name && m.category === item.category);
          
          const row = document.createElement("tr");
          
          if (editingIndex === globalIndex) {
            // Edit mode
            row.innerHTML = `
              <td><input type="text" class="edit-input" value="${item.name}" id="editName${globalIndex}"></td>
              <td><input type="number" class="edit-input" value="${item.price}" id="editPrice${globalIndex}"></td>
              <td><input type="text" class="edit-input" value="${item.description || ''}" id="editDesc${globalIndex}"></td>
              <td>
                <div class="action-buttons">
                  <button class="update-btn" onclick="updateItem(${globalIndex})">Update</button>
                  <button class="cancel-btn" onclick="cancelEdit()">Cancel</button>
                </div>
              </td>
            `;
          } else {
            // View mode
            row.innerHTML = `
              <td>${item.name}</td>
              <td>‚Çπ${item.price}</td>
              <td>${item.description || 'No description'}</td>
              <td>
                <div class="action-buttons">
                  <button class="edit-btn" onclick="editItem(${globalIndex})">Edit</button>
                  <button class="delete-btn" onclick="deleteItem(${globalIndex})">Delete</button>
                </div>
              </td>
            `;
          }
          tbody.appendChild(row);
        });
      });

      localStorage.setItem("restaurantMenu", JSON.stringify(menu));
      // SYNC WITH CUSTOMER MENU
      syncMenuToCustomerView();
    }

    function addItem(name, price, category, description, image) {
      menu.push({ 
        name, 
        price: parseInt(price), 
        category, 
        description: description || '',
        image: image || '../static/images/default-food.jpg'
      });
      renderMenu();
      showNotification(`"${name}" has been added to the menu successfully!`);
    }

    function editItem(index) {
      editingIndex = index;
      renderMenu();
    }

    function updateItem(index) {
      const name = document.getElementById(`editName${index}`).value.trim();
      const price = document.getElementById(`editPrice${index}`).value;
      const description = document.getElementById(`editDesc${index}`).value.trim();

      if (!name || !price) {
        showNotification("Please fill all required fields!", false);
        return;
      }

      menu[index] = { 
        ...menu[index], 
        name, 
        price: parseInt(price), 
        description 
      };
      
      editingIndex = -1;
      renderMenu();
      showNotification(`"${name}" has been updated successfully!`);
    }

    function cancelEdit() {
      editingIndex = -1;
      renderMenu();
    }

    function deleteItem(index) {
      if (confirm(`Are you sure you want to delete "${menu[index].name}"?`)) {
        const itemName = menu[index].name;
        menu.splice(index, 1);
        if (editingIndex === index) editingIndex = -1;
        renderMenu();
        showNotification(`"${itemName}" has been removed from the menu.`);
      }
    }

    // Form submission
    form.addEventListener("submit", e => {
      e.preventDefault();
      const name = document.getElementById("itemName").value.trim();
      const price = document.getElementById("itemPrice").value;
      const category = document.getElementById("itemCategory").value;
      const description = document.getElementById("itemDescription").value.trim();
      const image = document.getElementById("itemImage").value.trim();

      if (!name || !price) {
        showNotification("Please fill all required fields!", false);
        return;
      }

      addItem(name, price, category, description, image);
      form.reset();
    });

    // Search functionality
    searchInput.addEventListener("input", renderMenu);

    // Initialize menu - THIS WILL DISPLAY ALL ITEMS
    renderMenu();
  </script>
</body>
</html>